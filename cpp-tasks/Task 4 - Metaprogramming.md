
# Задача 4. Metaprogramming (задача в разработке)

## Подзадача 1. Обобщённый Flat Map

Превратите ваш класс `FlatMap` из первой задачи в шаблонный класс, поддерживающий любые типы ключей (для которых определён `operator<`) и любые типы значений (для которых определён конструктор без параметров).

```C++
template <class Key, class Value>
class FlatMap {
    // ...
}
```

Дополнительно: 

1. К шаблонным параметрам `Key` и `Value` добавьте `Compare` и `Allocator`, определяющие политики сравнения ключей и выделения памяти. 
    ```C++
    template <class Key,
              class Value,
              class Compare = std::less<Key>,
              class Allocator = std::allocator<...>
             >
    class FlatMap {
        // ...
    }
    ```

2. Сделайте специализацию таблицы для значений типа `bool` (`Value = bool`). Эта специализация хранит только значения `true`, а `false` не хранится. Присвоение ключу значения `false` равноценно удалению ключа из таблицы. **Примечание:** данная специализация не обязана поддерживать все остальные пункты задачи, которые вы сделаете.

3. Если вы ранее не сделали поддержку итераторов, реализуйте её сейчас.

4. Реализуйте шаблонный метод `try_emplace`, который позволит вставлять элементы в таблицу следующим образом:
    ```C++
    class A {
    public:
        A(int x, double y, std::string z) {
            // ...
        }
    }
    FlatMap<std::string, A> map_of_a;
    map_of_a.try_emplace("key1", 3, 5.6, "test"); // создан и вставлен в таблицу объект A(3, 5.6, "test") по ключу "key1"
    ```
    Если такой ключ уже есть в таблице, метод ничего не делает.

## Подзадача 2 (дополнительно). Вычисления на этапе компиляции


